name: Docker Image CI

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:

  build:

    runs-on: ubuntu-latest
    env:
      ftoken: eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJjaXBoZXJ0ZXh0IjoidHIzMEc1cHYzSnJic3NtWTlxRXFPMEktU0E5VHNFNnNWTnc4M19lZnJUNGg5a2llZWFMaFlMTVY3Z3U1R0dnUXY5M2xfVjctMFlZZkQ0b2JRVHlfendhWFVnWDA3NEgzc2pzZWd2MzhQcGFPZkU4RkFhQTNrZWdLSTRkRlRoTkN5bkpIcWJpc1lKSjJPMEFwX0tTanRFcmlmaEpRWGxhVTdwWDcxUzVTY213aWxueTZpQUFVa2tvQzVuNkM5clAyMnhycmR4cUtwMjlDelVGX0FTTlJkbm5kR0ttOEk2OXBhQTJKZTNBUTRtTXhTNUl1TUU1UyIsImVuY3J5cHRlZF9rZXkiOiJJWWpTSXpVUHpzY0ppLWZNbGVIOGNjb1NGYWhvWnNLX0FfcFd0SDN4TEI0IiwiaGVhZGVyIjp7Iml2IjoiMmtFT0NCb2FEa05HSzFoTyIsInRhZyI6IkJUTEJrNHJyTnJlMDZaQWFwQmNGSkEifSwiaXYiOiJsd3hzbWdfbDFvM1JmT190IiwicHJvdGVjdGVkIjoiZXlKaGJHY2lPaUpCTWpVMlIwTk5TMWNpTENKbGJtTWlPaUpCTWpVMlIwTk5JbjAiLCJ0YWciOiJVTndRb2xySGZHaE5DQ3R0ZFVKcXpBIn0.jHnLGrVTJqy97zNr8Tt36BQEnQXFAZY6iuvVFpYLxrOgmstO-2cJemkxPfXJkwiGIxpiK7jv0takZHVnnuQ6ww
      
    steps:
    - uses: actions/checkout@v2
    - name: Build the Docker image
      run: |
           docker pull fluidattacks/forces:new
           docker images
           docker run --rm -i fluidattacks/forces:new forces --token ${{env.ftoken}} -vv
